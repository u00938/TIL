[Reference](https://emong.tistory.com/145)
[Reference2](https://uhou.tistory.com/96)

## Apache/Nginx

Apache와 Nginx는 모두 HTTP server이다. 정적 파일(.jpg, .html 파일 등)이나 동적 페이지(PHP나 python 등의 언어로 작성된 페이지)를 웹 브라우저에 제공해준다. 때문에 사용자가 요청할 URL을 인식해서 올바른 위치로 라우팅하도록 구성해야 한다.

예를 들어 일반적인 PHP 사이트의 요청을 처리할 때, Apache에 .php로 끝나는 파일은 모두 PHP 코드로 해석해야 한다고 지시한다면, 사용자가 "http://myblog.com/tag.php?q=mytag" 주소로 접속할 때 Apache는 파일을 읽고 HTML 페이지로 처리하기 위해 PHP interpreter를 실행할 것이다. 그렇게 되면 PHP는 데이터베이스의 데이터를 이용해 페이지를 생성할 수 있고, 최종 HTML 코드를 Apache에 전달하여 사용자의 브라우저로 전송한다.

## Node.js

Node.js는 PHP와 같이 프로그래밍 환경으로서, 데이터베이스를 이용해 동적 페이지를 생성할 수 있다. 그러나 HTTP 서버를 포함한다는 점에서 차이가 있는데, 이는 즉 Nginx나 Apache 없이도 단독으로 동작할 수 있다는 것을 뜻한다. Node.js를 실행하는 것 자체로 HTTP 서버가 되고, app 서버가 되어 동적 페이지를 생성하고 데이터베이스와 소통할 수 있다.

Node.js 서버를 배포할 때, Nginx와 같은 다른 HTTP 서버를 앞에 두는 경우가 있다. 이런 구조에서는 사용자가 페이지를 로드할 때, 먼저 Nginx가 요청을 라우팅할 위치를 결정한다. 이런 기능은 규모가 큰 사이트에서 많은 트래픽을 처리할 때 유용하다. 이런 방식으로 단일 Nginx 서버는 많은 Node.js app 서버에서 수행될 작업을 분할할 수 있다.

## Proxy Server

**리버스 프록시**: 내부 어플리케이션과 외부 클라이언트 사이에 자리잡아서 클라이언트의 요청을 적절한 서버로 보내주는 역할을 한다. 많은 애플리케이션들이 자체적으로 가지지 못한 로드 밸런싱, 보안, 가속화 기능 등을 갖고 있다.

프록시 서버를 통해 다른 네트워크에 간접적으로 접속할 수 있도록 해준다. 프록시 서버를 도입하게 되면 익명의 사용자가 서버에 접근할 때 직접적이지 않고 한 단계를 더 거쳐야 하므로 보안적으로 우세하다. 또한 사용자의 요청을 cache 형태로 가지고 있기 때문에 동일한 요청 시 더 빠르게 응답할 수 있어 속도적으로 우세하며, 불필요한 리소스 낭비가 줄어든다.

특히 리버스 프록시는 사용자가 실제 서버의 정보를 알지 못한다는 장점이 있다. 포워드 프록시의 경우는 클라이언트에서 요청을 실제 서버에 요청하여 데이터를 가져오지만, 리버스 프록시의 경우 클라이언트 요청을 리버스 프록시 서버가 받아 사용자가 알지 못하는 서버에서 데이터를 가져오게 된다. Node express에서 사용하는 실제 포트를 Nginx의 80 포트 프록시 서버로 숨김으로써 보안을 강화하는 것이다.

사용자가 많은 웹 애플리케이션의 경우 Node.js 단일로 서버를 운영하는 것 보다는 리버스 프록시를 Node.js와 연동하여 서버를 구축하는 것이 좋을 것이다.




