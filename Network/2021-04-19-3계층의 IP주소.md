[Reference](https://www.youtube.com/playlist?list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi)

## 3계층

서로 다른 LAN 대역들을 서로 연결

- 다른 네트워크 대역 즉, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어하는 일을 담당
- 발신에서 착신까지의 패킷의 경로를 제어
- 라우터: 3계층 장비로서 LAN과 LAN을 연결

#### IP 주소

WAN에서 통신할 때 사용

- IPv4: 현재 PC에 할당된 IP 주소
- 서브넷 마스크: IP 주소에 대한 네트워크의 대역을 규정하는 것
- 게이트웨이 주소: 외부와 통신할 때 사용하는 네트워크의 출입구

#### 3계층 프로토콜

- ARP 프로토콜: IP주소를 이용해 MAC 주소를 알아옴
- IPv4 프로토콜: WAN에서 통신할 때 사용
- ICMP 프로토콜: WAN에서 통신할 때 사용

<br>

## IP 주소

10진수(0~255)로 구성, 4개의 필드가 .으로 구분된다. ex) 192.168.0.189 (4byte)

2진수 00000000 ~ 11111111

10진수 0 ~ 255

2진수 8개 = 1byte

00000000.00000000.00000000.00000000 ~ 11111111.11111111.11111111.11111111

0.0.0.0 ~ 255.255.255.255

#### Classful IP 주소

IP 주소 범위를 클래스 별로 사용

IP 주소 낭비가 심하다 => 주소 부족

네트워크 대역 구분/ 하나의 대역에 속한 각자의 PC를 구분하는 필드로 분류

- A 클래스: 첫번째 필드(0XXXXXXX)/ 나머지 필드
  - 0.0.0.0 ~ 127.255.255.255
- B 클래스: ~ 두번째 필드(10XXXXXX)/ 나머지 필드
  - 128.0.0.0 ~ 191.255.255.255
- C 클래스: ~ 세번째 필드(110XXXXX)/ 나머지 필드
  - 일반적으로 사용됨(192.0.0.0~)
- D 클래스: 멀티캐스트를 위해 남겨둔 주소
- E 클래스: 실험용 IP 주소

#### Classless IP 주소

하나의 큰 네트워크를 여러개의 작은 네트워크로 쪼개서 사용

.으로 필드를 구분하지 않음

**서브넷 마스크**

- 네트워크 대역을 어디서부터 구분할 건지 지정해줌
- 2진수로 표기했을 때 1로 시작하고, 연속된 1로 이루어져있음
- 1과 1 사이에는 0이 올 수 없고, 0이 한 번 나오면 그 뒤는 전부 0
- 1과 0이 바뀌는 부분의 앞부분이 네트워크 대역을 구분하는 필드
- 11111111.11111111.11111111.11000000: 한 네트워크 대역에 64(000000)대의 PC => 낭비되는 PC가 별로 없다.
- 서브넷팅: 하나의 네트워크 대역을 쪼개는 것
- 슈퍼넷팅: 쪼개진 네트워크 대역을 다시 하나로 합침

<br>

## NAT

Network Address Translation: 네트워크 주소를 특정 IP(사설)에서 다른 IP(공인)로 바꿔주는 기술

- 사설 IP: 같은 네트워크 대역에서 사용하는 주소
- 공인 IP: 네트워크 통신망과 통신할 때 사용하는 주소
- 공인 IP 1개 당 2^32개의 사설 IP
- 사설 네트워크 대역에 있는 장비들(사설 IP 사용)이 외부와 통신할 때 무조건 공인 IP로 바꿔서 통신
- 같은 대역의 장비들은 외부에서 봤을 때 모두 같은 IP 주소로 보임(공인IP)
- 어떤 요청이 나갈 때 공유기가 NAT table에 기록 => 응답이 오면 table을 보고 대상에 전달해줌
- 나간 적이 없는(table에 기록이 없는) 패킷이 응답으로 들어오면? => 공유기가 받고 종료. 전달 없음


<br>

## 특수한 IP 주소

- 0.0.0.0: Wildcard. 나머지 모든 IP
- 127.0.0.1: 자기 자신을 나타내는 주소
- 게이트웨이 주소: 공유기의 IP(공인/WAN)
  - 대역에서 쓸 수 있는 IP주소 중 가장 작거나 큰 IP
  - 일반적으로 낮은 주소