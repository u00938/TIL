[Reference](https://www.youtube.com/playlist?list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi)

## 3계층: 최적의 경로를 찾아가자

#### 라우팅 테이블

라우팅 테이블이 최적의 경로를 지도처럼 저장하고 있다.

패킷을 어디로 보내야하는지 설정되어 있고, 라우팅 테이블에 적혀있는 네트워크 대역만 찾아갈 수 있다.

테이블에 없으면 찾아갈 수 없기 때문에 기본값을 넣어둔다.

기본값: 0.0.0.0

<br>

## 다른 네트워크와 통신 과정

A가 다른 대역에 있는 B와 통신할 때

#### 1. A가 자신의 라우팅 테이블을 확인

A의 라우팅 테이블에 B의 네트워크 대역이 있어야 통신 가능

#### 2. A가 요청 프로토콜 작성: Ethernet + IPv4 + ICMP => 게이트웨이

Ethernet: 가까운 곳의 목적 MAC 주소

IPv4

ICMP: Type 요청(8)

#### 3. 다른 네트워크로 넘어갈 때: Ethernet 프로토콜을 다시 작성

3계층 프로토콜까지 확인: 목적지의 IP 주소 확인

자신의 라우팅 테이블 확인 후 이더넷 프로토콜을 다시 만든다. 다음 네트워크 대역에서 통신할 수 있게 목적지 MAC 주소와 출발지 MAC 주소를 변경한다.

네트워크 대역이 바뀔 때마다 Ethernet 프로토콜이 새로 작성된다.

가까운 곳의 MAC 주소를 모를 경우: ARP 프로토콜로 먼저 알아온 후 진행한다.

#### 4. ICMP 요청 확인 후 응답 프로토콜 작성

ICMP: Type 응답(0)

![라우팅테이블](https://i.imgur.com/ZsYRV1L.jpg)